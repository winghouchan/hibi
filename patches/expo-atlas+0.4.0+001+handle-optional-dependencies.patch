# Fixes bundler crashing when attempting to handle an optional dependency.
# See https://github.com/expo/atlas/issues/84.
diff --git a/node_modules/expo-atlas/build/src/data/MetroGraphSource.js b/node_modules/expo-atlas/build/src/data/MetroGraphSource.js
index 38701bd..8153a2e 100644
--- a/node_modules/expo-atlas/build/src/data/MetroGraphSource.js
+++ b/node_modules/expo-atlas/build/src/data/MetroGraphSource.js
@@ -149,7 +149,7 @@ function convertModule(options, module, sharedRoot) {
         relativePath: (0, paths_1.convertPathToPosix)(path_1.default.relative(sharedRoot, module.path)),
         package: (0, package_1.getPackageNameFromPath)(module.path),
         size: module.output.reduce(function (bytes, output) { return bytes + Buffer.byteLength(output.data.code); }, 0),
-        imports: Array.from(module.dependencies.values()).map(function (module) { return ({
+        imports: Array.from(module.dependencies.values()).filter((module) => module.absolutePath).map(function (module) { return ({
             id: createModuleId(module.absolutePath),
             absolutePath: module.absolutePath,
             relativePath: (0, paths_1.convertPathToPosix)(path_1.default.relative(sharedRoot, module.absolutePath)),
